<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>chainable-components</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.js" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">chainable-components</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
							<input type="checkbox" id="tsd-filter-only-exported" />
							<label class="tsd-widget" for="tsd-filter-only-exported">Only exported</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<ul class="tsd-breadcrumb">
				<li>
					<a href="globals.html">Globals</a>
				</li>
			</ul>
			<h1> chainable-components</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<h1 id="chainable-components">Chainable Components</h1>
				<p><em>Make your render props composable!</em></p>
				<p>From:</p>
				<pre><code class="lang-jsx"><span class="hljs-keyword">const</span> WithTwoState = <span class="hljs-function"><span class="hljs-params">props</span> =&gt;</span> {
  <span class="hljs-keyword">return</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">WithState</span> <span class="hljs-attr">initial</span>=<span class="hljs-string">{0}</span>&gt;</span>
      {outer =&gt; (
        <span class="hljs-tag">&lt;<span class="hljs-name">WithState</span> <span class="hljs-attr">initial</span>=<span class="hljs-string">{outer</span> + <span class="hljs-attr">5</span>}&gt;</span>
          {inner =&gt; (
            props.children({inner, outer})
          )}
        <span class="hljs-tag">&lt;/<span class="hljs-name">WithState</span>&gt;</span>
      )
    <span class="hljs-tag">&lt;/<span class="hljs-name">WithState</span>&gt;</span></span>
  );
}
</code></pre>
				<p>To:</p>
				<pre><code class="lang-jsx"><span class="hljs-keyword">const</span> withTwoState =
  withState({<span class="hljs-attr">initial</span>: <span class="hljs-number">0</span>}).chain(<span class="hljs-function"><span class="hljs-params">outer</span> =&gt;</span> 
    withState({<span class="hljs-attr">initial</span>: outer + <span class="hljs-number">5</span>}).map(<span class="hljs-function"><span class="hljs-params">inner</span> =&gt;</span> 
      ({inner, outer})
    )
  )
</code></pre>
				<h3 id="converting-a-render-prop-component-to-a-chainable-">Converting a Render Prop component to a Chainable:</h3>
				<p>Here&#39;s an example of a render prop <code>WithPromise</code>:</p>
				<pre><code class="lang-jsx">&lt;WithPromise get={() =&gt; fetchUser(<span class="hljs-number">1234</span>)}&gt;
  {user =&gt; (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Hello, {user.username}!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )}
&lt;<span class="hljs-regexp">/WithPromise&gt;</span>
</code></pre>
				<p>You provide a function that returns a promise via the <code>get</code> attribute, then it returns the value in that promise via the children callback. In this case, the <code>fetchUser</code> function returns a promise that will return a <code>User</code>, so a <code>User</code> is supplied to the callback.</p>
				<p>You can convert this existing Render Prop component to a chainable component with the <code>fromRenderProp</code> function:</p>
				<pre><code class="lang-jsx"><span class="hljs-keyword">const</span> withPromise = fromRenderProp(WithPromise);
</code></pre>
				<p><code>withState</code>  is now a function that takes a configuration object (which would have been props to the render prop function), and returns a chainable component:</p>
				<pre><code class="lang-jsx"><span class="hljs-keyword">const</span> userChainable: ChainableComponent&lt;User&gt; = withPromise({<span class="hljs-attr">get</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> fetchUser(<span class="hljs-number">1234</span>)});
</code></pre>
				<p>Since the <code>get</code> function will return a promise of <code>User</code>, the contextual value inside of this chainable component is <code>User</code>, so <code>userChainable</code>’s type is <code>ChainableComponent&lt;User&gt;</code> (said, “chainable component of user”).</p>
				<h3 id="rendering-a-chainable-component-">Rendering a Chainable Component:</h3>
				<p>Since the ”wrapped” value’s type is  <code>User</code>, the <code>ap</code> method takes a function which takes a user, and returns the rendered output:</p>
				<pre><code class="lang-jsx">userChainable.render(<span class="hljs-function"><span class="hljs-params">user</span> =&gt;</span> (
  <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Hello, {user.username}!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
));
</code></pre>
				<p>All together, this looks like:</p>
				<pre><code class="lang-jsx">withPromise({<span class="hljs-attr">get</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> fetchUser(<span class="hljs-number">1234</span>)})
  .render(<span class="hljs-function"><span class="hljs-params">user</span> =&gt;</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{user.id} - {user.username}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  ))
</code></pre>
				<p>Which is actually quite similar to the render prop version:</p>
				<pre><code class="lang-jsx">&lt;WithPromise get={() =&gt; fetchUser(<span class="hljs-number">1234</span>)}&gt;
  {user =&gt; (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{user.id} - {user.username}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  )}
&lt;<span class="hljs-regexp">/WithPromise&gt;</span>
</code></pre>
				<p>Why would we go through the trouble of converting a Render Prop to a Chainable Component? The answer is the additional methods a chainable component has, <code>map</code> and <code>chain</code>.</p>
				<h3 id="mapping-values-inside-a-chainable-component">Mapping values inside a Chainable Component</h3>
				<p>Suppose we didn’t care about any information about the user at all, only their role, because we wanted to display something to the user, but only if they were an admin. We could map the user value inside our hoc into a boolean, and then use the boolean when we actually apply the chainable component. For instance,</p>
				<pre><code class="lang-jsx">withPromise({<span class="hljs-attr">get</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> fetchUser(<span class="hljs-number">1234</span>)})
  .map(<span class="hljs-function"><span class="hljs-params">user</span> =&gt;</span> user.role === <span class="hljs-string">'Administrator'</span>)
  .render(<span class="hljs-function"><span class="hljs-params">isAdmin</span> =&gt;</span> (
    isAdmin ? (<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>secret plans...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>) :
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>Access denied!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  ));
</code></pre>
				<h3 id="composing-chainable-components">Composing Chainable Components</h3>
				<p>Chainable components can be composed, or “chained” easily using the chain method. <code>chain</code>  is very similar to <code>map</code>, except that the function parameter returns another chainable component. This allows you to combine chainables, and use the output of one as input to the other.</p>
				<p>Let’s suppose that you wanted to fetch a user, and when the user loaded, “fade in” the ui so that it looks smooth. You could add the fade in styles to the <code>WithPromise</code> render prop, but then it would be applied to all instances where <code>WithPromise</code> is used. A better approach, would be to build a separate chainable component, and then compose the two together with <code>chain</code>:</p>
				<p>Let&#39;s suppose we have a <code>fadeIn</code> chainable component, which just applies styles based on configuration passed to it:</p>
				<pre><code class="lang-jsx">fadeIn({<span class="hljs-attr">duration</span>: <span class="hljs-number">500</span>, <span class="hljs-attr">delay</span>: <span class="hljs-number">0</span>})
  .render(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> (
    <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>This is smooth!<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  ));
</code></pre>
				<p>Composing the <code>withPromise</code> and <code>fadeIn</code> chainable components would look like: </p>
				<pre><code class="lang-jsx"><span class="hljs-keyword">const</span> fadeIn = buildChainable(FadeIn);

withPromise({<span class="hljs-attr">get</span>: <span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> fetchUser(<span class="hljs-number">1234</span>)})
  .chain(<span class="hljs-function"><span class="hljs-params">user</span> =&gt;</span>
    fadeIn({<span class="hljs-attr">duration</span>: <span class="hljs-number">500</span>, <span class="hljs-attr">delay</span>: <span class="hljs-number">0</span>})
      .map(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> user))
  .render(<span class="hljs-function"><span class="hljs-params">user</span> =&gt;</span> (
      <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>{user.id} - {user.username}<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>
  ))
</code></pre>
				<p>With the addition of <code>map</code> and <code>chain</code>, our Render Prop components can now enjoy the composablity of HOC’s, but still keep the declarative nature of Render Props!</p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class="globals  ">
						<a href="globals.html"><em>Globals</em></a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_chainablecomponent_.html">"<wbr>Chainable<wbr>Component"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_index_.html">"index"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_lib_lazy_.html">"lib/lazy"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_lib_pure_.html">"lib/pure"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_lib_withpromise_.html">"lib/with<wbr>Promise"</a>
					</li>
					<li class=" tsd-kind-external-module">
						<a href="modules/_lib_withstate_.html">"lib/with<wbr>State"</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-module"><span class="tsd-kind-icon">Module</span></li>
				<li class="tsd-kind-object-literal"><span class="tsd-kind-icon">Object literal</span></li>
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-index-signature"><span class="tsd-kind-icon">Index signature</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li>
				<li class="tsd-kind-enum-member"><span class="tsd-kind-icon">Enumeration member</span></li>
				<li class="tsd-kind-property tsd-parent-kind-enum"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-enum"><span class="tsd-kind-icon">Method</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-interface"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-interface"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
				<li class="tsd-kind-class tsd-has-type-parameter"><span class="tsd-kind-icon">Class with type parameter</span></li>
				<li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class"><span class="tsd-kind-icon">Accessor</span></li>
				<li class="tsd-kind-index-signature tsd-parent-kind-class"><span class="tsd-kind-icon">Index signature</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-constructor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited constructor</span></li>
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-inherited"><span class="tsd-kind-icon">Inherited accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-protected"><span class="tsd-kind-icon">Protected accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private property</span></li>
				<li class="tsd-kind-method tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private method</span></li>
				<li class="tsd-kind-accessor tsd-parent-kind-class tsd-is-private"><span class="tsd-kind-icon">Private accessor</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li>
				<li class="tsd-kind-call-signature tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="http://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
<script>if (location.protocol == 'file:') document.write('<script src="assets/js/search.js"><' + '/script>');</script>
</body>
</html>